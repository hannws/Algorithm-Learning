# [Platinum III] 소수 쌍 - 1017 

[문제 링크](https://www.acmicpc.net/problem/1017) 

### 성능 요약

메모리: 32412 KB, 시간: 44 ms

### 분류

수학, 정수론, 소수 판정, 에라토스테네스의 체, 이분 매칭

### 제출 일자

2026년 1월 5일 22:03:58

### 문제 설명

<p>지민이는 수의 리스트가 있을 때, 이를 짝지어 각 쌍의 합이 소수가 되게 하려고 한다. 예를 들어, {1, 4, 7, 10, 11, 12}가 있다고 하자. 지민이는 다음과 같이 짝지을 수 있다.</p>

<p>1 + 4 = 5, 7 + 10 = 17, 11 + 12 = 23</p>

<p>또는</p>

<p>1 + 10 = 11, 4 + 7 = 11, 11 + 12 = 23</p>

<p>수의 리스트가 주어졌을 때, 지민이가 모든 수를 다 짝지었을 때, 첫 번째 수와 어떤 수를 짝지었는지 오름차순으로 출력하는 프로그램을 작성하시오. 위의 예제에서 1 + 12 = 13으로 소수이다. 그러나, 남은 4개의 수를 합이 소수가 되게 짝지을 수 있는 방법이 없다. 따라서 위의 경우 정답은 4, 10이다.</p>

### 입력 

 <p>첫째 줄에 리스트의 크기 N이 주어진다. N은 50보다 작거나 같은 자연수이며, 짝수이다. 둘째 줄에 리스트에 들어있는 수가 주어진다. 리스트에 들어있는 수는 1,000보다 작거나 같은 자연수이며, 중복되지 않는다.</p>

### 출력 

 <p>첫째 줄에 정답을 출력한다. 없으면 -1을 출력한다.</p>

### 배운점
- 소수 판단 방법 : N이 소수인지 판단하기 위해서는 N보다 작은 자연수로 모두 나누는 것이 아닌 2~(N**0.5) 로만 나누어도 소수를 판단할 수 있다. u> t > n**0.5 라고 가정하면 어떤 u, t가 와도 N의 값을 형성할 수 없기 때문이다.
- 에라토스테네스의 체 : 소수를 판단하는 문제에서 미리 소수 판단을 해놓고 코드를 작성해서 코드의 속도를 증가시킬 수 있다. i가 2일 때는 2의 배수를 모두 False로 전환시키고 3일 때는 3의 배수를 모두 False로 전환시키는 과정을 거쳐서 제작한다.
```is_prime = [True]*(limit+1)
is_prime[0] = is_prime[1] = False
for i in range(2, int(limit**0.5)+1):
    if is_prime[i]:
        for j in range(i*i, limit+1, i):
            is_prime[j] = False
```
- 이진 매칭 : 두 개의 그룹으로 분리해서 서로 짝지을 수 있는지를 판단할 때 사용된다. 이번 문제에서는 소수 제작을 위해 짝수와 홀수로 분리한 후 서로의 그룹이 일대일로 대응될 수 있는지를 판단하였다.
- A에서 B로 매칭시킨다고 할 때 A의 각각의 요소가 매칭 가능한 B를 확인하고 A1과 B를 연결한다. A2와 B를 연결하는데 비어있다면 그냥 연결하고 다른 요소가 자리를 차지하고 있다면 다른 요소를 다른 B 요소에 매칭할 수 있는지 확인하고 가능하다면 그 자리를 A2가 차지하고 불가능하다면 A2와 연결 가능한 다른 B에 연결을 시도한다. 모두 연결을 실패하면 False를 반환한다.
```
def dfs(u, candid):
    for i in graph[u]:
        if visited[i] or i == candid:
            continue
        visited[i] = True
        if match[i] == -1 or dfs(match[i], candid):
            match[i] = u
            return True
    return False
```
